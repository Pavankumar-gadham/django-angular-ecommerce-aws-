"use strict";(self.webpackChunkecommerce_frontend=self.webpackChunkecommerce_frontend||[]).push([[602],{3602:(T,u,s)=>{s.r(u),s.d(u,{ProductsModule:()=>j});var p=s(177),d=s(749),t=s(8699),g=s(2423),l=s(4341);function m(n,c){1&n&&(t.j41(0,"div",16),t.EFF(1," No products found matching your filters. "),t.k0s())}function f(n,c){if(1&n&&t.nrm(0,"img",21),2&n){const e=t.XpG().$implicit;t.FS9("alt",e.name),t.Y8G("src",e.image,t.B4B)}}const h=function(n){return["/products",n]};function _(n,c){if(1&n&&(t.j41(0,"div",17),t.DNE(1,f,1,2,"img",18),t.j41(2,"div",19)(3,"h4"),t.EFF(4),t.k0s(),t.j41(5,"p"),t.EFF(6),t.nI1(7,"slice"),t.k0s(),t.j41(8,"p")(9,"strong"),t.EFF(10),t.k0s()(),t.j41(11,"button",20),t.EFF(12,"View Details"),t.k0s()()()),2&n){const e=c.$implicit;t.R7$(1),t.Y8G("ngIf",e.image),t.R7$(3),t.JRh(e.name),t.R7$(2),t.SpI("",t.brH(7,5,e.description,0,80),"..."),t.R7$(4),t.SpI("\u20b9",e.price,""),t.R7$(1),t.Y8G("routerLink",t.eq3(9,h,e.id))}}let P=(()=>{class n{constructor(e,o){this.productService=e,this.route=o,this.products=[],this.page=1,this.totalPages=0,this.selectedCategories=[],this.filters={search:"",min_price:"",max_price:""}}ngOnInit(){this.route.queryParams.subscribe(e=>{const o=e.category;this.selectedCategories=Array.isArray(o)?o:o?[o]:[],this.page=1,this.loadProducts()})}loadProducts(){const e={page:this.page,page_size:4};this.selectedCategories.length>0&&(e.category=this.selectedCategories);const o=this.filters.search?.trim();o&&(e.search=o),""!==this.filters.min_price&&null!=this.filters.min_price&&(e.min_price=Number(this.filters.min_price)),""!==this.filters.max_price&&null!=this.filters.max_price&&(e.max_price=Number(this.filters.max_price)),this.productService.getProducts(e).subscribe({next:i=>{this.products=i.results,this.totalPages=i.total_pages},error:i=>{console.error("Error loading products:",i),this.products=[],this.totalPages=0}})}onFilterChange(){this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.page=1,this.loadProducts()},500)}clearFilters(){this.filters.search="",this.filters.min_price="",this.filters.max_price="",this.page=1,this.loadProducts()}nextPage(){this.page<this.totalPages&&(this.page++,this.loadProducts())}prevPage(){this.page>1&&(this.page--,this.loadProducts())}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(g.b),t.rXU(d.nX))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-product-list"]],decls:30,vars:9,consts:[[1,"main-container"],[1,"filter-section"],[1,"filter-grid"],[1,"filter-item"],["for","search"],["type","text","id","search","placeholder","Search by name...",3,"ngModel","ngModelChange","input"],["for","minPrice"],["type","number","id","minPrice","placeholder","Min",3,"ngModel","ngModelChange","input"],["for","maxPrice"],["type","number","id","maxPrice","placeholder","Max",3,"ngModel","ngModelChange","input"],[3,"click"],[1,"products-grid"],["class","no-products",4,"ngIf"],["class","product-card",4,"ngFor","ngForOf"],[1,"pagination"],[3,"disabled","click"],[1,"no-products"],[1,"product-card"],[3,"src","alt",4,"ngIf"],[1,"product-info"],[3,"routerLink"],[3,"src","alt"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"section",1)(2,"h3"),t.EFF(3,"Filters"),t.k0s(),t.j41(4,"div",2)(5,"div",3)(6,"label",4),t.EFF(7,"Search Products"),t.k0s(),t.j41(8,"input",5),t.bIt("ngModelChange",function(a){return i.filters.search=a})("input",function(){return i.onFilterChange()}),t.k0s()(),t.j41(9,"div",3)(10,"label",6),t.EFF(11,"Min Price (\u20b9)"),t.k0s(),t.j41(12,"input",7),t.bIt("ngModelChange",function(a){return i.filters.min_price=a})("input",function(){return i.onFilterChange()}),t.k0s()(),t.j41(13,"div",3)(14,"label",8),t.EFF(15,"Max Price (\u20b9)"),t.k0s(),t.j41(16,"input",9),t.bIt("ngModelChange",function(a){return i.filters.max_price=a})("input",function(){return i.onFilterChange()}),t.k0s()(),t.j41(17,"div",3)(18,"button",10),t.bIt("click",function(){return i.clearFilters()}),t.EFF(19,"Clear Filters"),t.k0s()()()(),t.j41(20,"section",11),t.DNE(21,m,2,0,"div",12),t.DNE(22,_,13,11,"div",13),t.k0s(),t.j41(23,"div",14)(24,"button",15),t.bIt("click",function(){return i.prevPage()}),t.EFF(25,"Previous"),t.k0s(),t.j41(26,"span"),t.EFF(27),t.k0s(),t.j41(28,"button",15),t.bIt("click",function(){return i.nextPage()}),t.EFF(29,"Next"),t.k0s()()()),2&o&&(t.R7$(8),t.Y8G("ngModel",i.filters.search),t.R7$(4),t.Y8G("ngModel",i.filters.min_price),t.R7$(4),t.Y8G("ngModel",i.filters.max_price),t.R7$(5),t.Y8G("ngIf",0===i.products.length),t.R7$(1),t.Y8G("ngForOf",i.products),t.R7$(2),t.Y8G("disabled",i.page<=1),t.R7$(3),t.Lme("Page ",i.page," of ",i.totalPages,""),t.R7$(1),t.Y8G("disabled",i.page>=i.totalPages))},dependencies:[p.Sq,p.bT,l.me,l.Q0,l.BC,l.vS,d.Wk,p.P9],styles:[".main-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;font-family:Arial,sans-serif;color:#333;background-color:#f8f9fa}.filter-section[_ngcontent-%COMP%]{background-color:#fff;padding:16px;border-radius:6px;box-shadow:0 2px 4px #0000001a;margin-bottom:24px}.filter-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:16px;font-size:1.2rem}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.filter-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500}.filter-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:4px;border:1px solid #ccc;box-sizing:border-box}.filter-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#f0f0f0;border:1px solid #ccc;border-radius:4px;cursor:pointer;transition:background-color .2s}.filter-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.product-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:6px;box-shadow:0 2px 4px #0000000d;overflow:hidden;transition:transform .2s,box-shadow .2s}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 4px 8px #0000001a}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover}.product-info[_ngcontent-%COMP%]{padding:12px;text-align:center}.product-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:8px;font-size:1.1rem}.product-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:.9rem}.product-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s}.product-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.pagination[_ngcontent-%COMP%]{text-align:center;margin-top:24px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 8px;padding:8px 14px;border:1px solid #ccc;border-radius:4px;background-color:#fff;cursor:pointer}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f0f0f0}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"]})}}return n})();var C=s(8065),b=s(7545);function x(n,c){if(1&n&&t.nrm(0,"img",8),2&n){const e=t.XpG(2);t.FS9("alt",e.product.name),t.Y8G("src",e.product.image,t.B4B)}}function F(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4),t.DNE(3,x,1,2,"img",5),t.k0s(),t.j41(4,"div",6)(5,"h2"),t.EFF(6),t.k0s(),t.j41(7,"p"),t.EFF(8),t.k0s(),t.j41(9,"p")(10,"strong"),t.EFF(11,"Category:"),t.k0s(),t.EFF(12),t.k0s(),t.j41(13,"p")(14,"strong"),t.EFF(15,"Price:"),t.k0s(),t.EFF(16),t.k0s(),t.j41(17,"button",7),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addToCart())}),t.EFF(18,"Add to Cart"),t.k0s()()()()}if(2&n){const e=t.XpG();t.R7$(3),t.Y8G("ngIf",e.product.image),t.R7$(3),t.JRh(e.product.name),t.R7$(2),t.JRh(e.product.description),t.R7$(4),t.SpI(" ",e.product.category,""),t.R7$(4),t.SpI(" \u20b9",e.product.price,"")}}function M(n,c){1&n&&(t.j41(0,"p"),t.EFF(1,"Loading product details..."),t.k0s())}function v(n,c){if(1&n&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.JRh(e.error)}}function k(n,c){if(1&n&&(t.DNE(0,M,2,0,"p",9),t.DNE(1,v,2,1,"p",9)),2&n){const e=t.XpG();t.Y8G("ngIf",e.loading),t.R7$(1),t.Y8G("ngIf",e.error)}}const O=[{path:"",component:P},{path:":id",component:(()=>{class n{constructor(e,o,i,r,a){this.route=e,this.productService=o,this.cartService=i,this.authService=r,this.router=a,this.product=null,this.loading=!0,this.error=null}ngOnInit(){const e=Number(this.route.snapshot.paramMap.get("id"));this.productService.getProductById(e).subscribe({next:o=>{this.product=o,this.loading=!1},error:()=>{this.error="Failed to load product details.",this.loading=!1}})}addToCart(){this.authService.isLoggedIn()?(this.cartService.addToCart(this.product),alert("Item added to cart!")):this.router.navigate(["/auth/login"])}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(d.nX),t.rXU(g.b),t.rXU(C.m),t.rXU(b.u),t.rXU(d.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-product-detail"]],decls:3,vars:2,consts:[["class","container mt-4",4,"ngIf","ngIfElse"],["loadingTpl",""],[1,"container","mt-4"],[1,"row"],[1,"col-md-5"],["class","img-fluid rounded shadow-sm",3,"src","alt",4,"ngIf"],[1,"col-md-7"],[1,"btn","btn-success",3,"click"],[1,"img-fluid","rounded","shadow-sm",3,"src","alt"],[4,"ngIf"]],template:function(o,i){if(1&o&&(t.DNE(0,F,19,5,"div",0),t.DNE(1,k,2,2,"ng-template",null,1,t.C5r)),2&o){const r=t.sdS(2);t.Y8G("ngIf",!i.loading&&i.product)("ngIfElse",r)}},dependencies:[p.bT]})}}return n})()}];let E=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(O),d.iI]})}}return n})();var I=s(1626);let j=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[p.MD,I.q1,l.YN,E]})}}return n})()}}]);