"use strict";(self.webpackChunkecommerce_frontend=self.webpackChunkecommerce_frontend||[]).push([[357],{357:(v,d,l)=>{l.r(d),l.d(d,{AuthModule:()=>F});var m=l(177),u=l(749),e=l(8699),g=l(7545),o=l(4341);function h(t,c){if(1&t&&(e.j41(0,"div",10),e.EFF(1),e.k0s()),2&t){const r=e.XpG();e.R7$(1),e.JRh(r.error)}}function f(t,c){if(1&t&&(e.j41(0,"div",14),e.EFF(1),e.k0s()),2&t){const r=e.XpG();e.R7$(1),e.JRh(r.error)}}function C(t,c){if(1&t&&(e.j41(0,"div",15),e.EFF(1),e.k0s()),2&t){const r=e.XpG();e.R7$(1),e.JRh(r.success)}}const M=[{path:"login",component:(()=>{class t{constructor(r,n){this.auth=r,this.router=n,this.username="",this.password="",this.error=""}login(){this.auth.login({username:this.username,password:this.password}).subscribe({next:()=>this.router.navigate(["/home"]),error:n=>this.error=n.error.detail||"Login failed"})}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(g.u),e.rXU(u.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:18,vars:3,consts:[[1,"container","mt-5",2,"max-width","400px"],[1,"text-center","mb-3"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit"],[1,"mb-3"],["type","text","name","username","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","w-100"],[1,"text-center","mt-3"],["routerLink","/auth/register"],[1,"alert","alert-danger"]],template:function(n,s){1&n&&(e.j41(0,"div",0)(1,"h3",1),e.EFF(2,"Login"),e.k0s(),e.DNE(3,h,2,1,"div",2),e.j41(4,"form",3),e.bIt("ngSubmit",function(){return s.login()}),e.j41(5,"div",4)(6,"label"),e.EFF(7,"Username"),e.k0s(),e.j41(8,"input",5),e.bIt("ngModelChange",function(i){return s.username=i}),e.k0s()(),e.j41(9,"div",4)(10,"label"),e.EFF(11,"Password"),e.k0s(),e.j41(12,"input",6),e.bIt("ngModelChange",function(i){return s.password=i}),e.k0s()(),e.j41(13,"button",7),e.EFF(14,"Login"),e.k0s()(),e.j41(15,"div",8)(16,"a",9),e.EFF(17,"Don\u2019t have an account? Register"),e.k0s()()()),2&n&&(e.R7$(3),e.Y8G("ngIf",s.error),e.R7$(5),e.Y8G("ngModel",s.username),e.R7$(4),e.Y8G("ngModel",s.password))},dependencies:[m.bT,o.qT,o.me,o.BC,o.cb,o.YS,o.vS,o.cV,u.Wk],encapsulation:2})}}return t})()},{path:"register",component:(()=>{class t{constructor(r,n){this.auth=r,this.router=n,this.username="",this.email="",this.password="",this.confirmPassword="",this.role="customer",this.phone="",this.error="",this.success=""}register(){if(this.password!==this.confirmPassword)return this.error="Passwords do not match.",void(this.success="");this.auth.register({username:this.username,email:this.email,password:this.password,role:this.role,phone:this.phone}).subscribe({next:()=>{this.success="Registration successful! Please login.",this.error="",setTimeout(()=>this.router.navigate(["/auth/login"]),2e3)},error:n=>{this.error=n.error.detail||"Registration failed",this.success=""}})}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(g.u),e.rXU(u.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-register"]],decls:31,vars:7,consts:[[1,"container","mt-5",2,"max-width","400px"],[1,"text-center","mb-3"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[3,"ngSubmit"],[1,"mb-3"],["type","text","name","username","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","password","name","confirmPassword","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","phone",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-success","w-100"],[1,"text-center","mt-3"],["routerLink","/auth/login"],[1,"alert","alert-danger"],[1,"alert","alert-success"]],template:function(n,s){1&n&&(e.j41(0,"div",0)(1,"h3",1),e.EFF(2,"Register"),e.k0s(),e.DNE(3,f,2,1,"div",2),e.DNE(4,C,2,1,"div",3),e.j41(5,"form",4),e.bIt("ngSubmit",function(){return s.register()}),e.j41(6,"div",5)(7,"label"),e.EFF(8,"Username"),e.k0s(),e.j41(9,"input",6),e.bIt("ngModelChange",function(i){return s.username=i}),e.k0s()(),e.j41(10,"div",5)(11,"label"),e.EFF(12,"Email"),e.k0s(),e.j41(13,"input",7),e.bIt("ngModelChange",function(i){return s.email=i}),e.k0s()(),e.j41(14,"div",5)(15,"label"),e.EFF(16,"Password"),e.k0s(),e.j41(17,"input",8),e.bIt("ngModelChange",function(i){return s.password=i}),e.k0s()(),e.j41(18,"div",5)(19,"label"),e.EFF(20,"Confirm Password"),e.k0s(),e.j41(21,"input",9),e.bIt("ngModelChange",function(i){return s.confirmPassword=i}),e.k0s()(),e.j41(22,"div",5)(23,"label"),e.EFF(24,"Phone"),e.k0s(),e.j41(25,"input",10),e.bIt("ngModelChange",function(i){return s.phone=i}),e.k0s()(),e.j41(26,"button",11),e.EFF(27,"Register"),e.k0s()(),e.j41(28,"div",12)(29,"a",13),e.EFF(30,"Already have an account? Login"),e.k0s()()()),2&n&&(e.R7$(3),e.Y8G("ngIf",s.error),e.R7$(1),e.Y8G("ngIf",s.success),e.R7$(5),e.Y8G("ngModel",s.username),e.R7$(4),e.Y8G("ngModel",s.email),e.R7$(4),e.Y8G("ngModel",s.password),e.R7$(4),e.Y8G("ngModel",s.confirmPassword),e.R7$(4),e.Y8G("ngModel",s.phone))},dependencies:[m.bT,o.qT,o.me,o.BC,o.cb,o.YS,o.vS,o.cV,u.Wk],encapsulation:2})}}return t})()}];let b=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[u.iI.forChild(M),u.iI]})}}return t})(),F=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[m.MD,o.YN,b]})}}return t})()}}]);