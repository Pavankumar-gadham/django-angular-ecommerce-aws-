<div class="container mt-4">
  <h2>Checkout</h2>

  <form #addressForm="ngForm">

    <h4 class="mt-3">Shipping Address</h4>

    <div class="row">
      <div class="col-md-6">
        <label>Full Name</label>
        <input type="text" class="form-control" [(ngModel)]="address.full_name" name="full_name" required />
      </div>

      <div class="col-md-6">
        <label>Phone</label>
        <input type="tel" class="form-control" [(ngModel)]="address.phone" name="phone" required />
      </div>

      <div class="col-md-12 mt-2">
        <label>Address</label>
        <textarea class="form-control" [(ngModel)]="address.address_line" name="address_line" required></textarea>
      </div>

      <div class="col-md-4 mt-2">
        <label>City</label>
        <input type="text" class="form-control" [(ngModel)]="address.city" name="city" required />
      </div>

      <div class="col-md-4 mt-2">
        <label>State</label>
        <input type="text" class="form-control" [(ngModel)]="address.state" name="state" required />
      </div>

      <div class="col-md-4 mt-2">
        <label>Pincode</label>
        <input type="text" class="form-control" [(ngModel)]="address.pincode" name="pincode" required />
      </div>
    </div>

  </form>

  <!-- Cart Items -->
  <div *ngIf="cartItems.length > 0; else emptyCart">

    <table class="table mt-4">
      <thead>
      <tr>
        <th>Product</th>
        <th>Qty</th>
        <th>Price</th>
        <th>Total</th>
      </tr>
      </thead>

      <tbody>
      <tr *ngFor="let item of cartItems">
        <td>{{ item.name }}</td>
        <td>{{ item.quantity }}</td>
        <td>₹{{ item.price }}</td>
        <td>₹{{ item.price * item.quantity }}</td>
      </tr>
      </tbody>
    </table>

    <h4>Total: ₹{{ totalAmount }}</h4>

    <button class="btn btn-success mt-3"
            (click)="placeOrder()"
            [disabled]="loading">
      {{ loading ? 'Placing order...' : 'Place Order' }}
    </button>

  </div>

  <ng-template #emptyCart>
    <p>Your cart is empty. <a routerLink="/products">Shop Now</a></p>
  </ng-template>
</div>
